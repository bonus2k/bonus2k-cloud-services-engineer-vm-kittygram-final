# Kittygram üêæ  
Kittygram ‚Äî —ç—Ç–æ Instagram –¥–ª—è –∫–æ—à–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ —Å–≤–æ–∏—Ö –ª—é–±–∏–º—Ü–µ–≤, –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, Terraform –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ GitHub Actions –¥–ª—è CI/CD.

---

## üìã –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

Kittygram –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∏—Ö –ø–∏—Ç–æ–º—Ü–∞.
- –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è.
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend:** API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
- **Frontend:** –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- **Gateway:** –ü—Ä–æ–∫—Å–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ Nginx.
- **PostgreSQL:** –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **Terraform:** –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (Yandex Cloud).
- **GitHub Actions:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–µ–ø–ª–æ—è.
- **Docker:** –î–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## üõ†Ô∏è CI/CD: –°–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö workflow –≤ GitHub Actions:

### 1. –°–±–æ—Ä–∫–∞ (`build.yml`):
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main`.  
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - Backend: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é `flake8`, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫–æ–¥–∞.
  - Frontend: –∑–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ `npm run test`.
- **–°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ Docker Hub:**
  - Docker-–æ–±—Ä–∞–∑—ã backend, frontend –∏ gateway —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Docker Hub.

### 2. –î–µ–ø–ª–æ–π (`deploy.yml`):
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (–∏–ª–∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ `repository_dispatch`).
- –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è:
  1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã `cloud-init` –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.
  2. –°–æ–∑–¥–∞—ë—Ç—Å—è `.env` —Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
  3. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–±—Ä–∞–∑—ã –∏–∑ Docker Hub –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `docker-compose`.
  4. –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## ‚öôÔ∏è Terraform: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Terraform –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ Yandex Cloud.

### –°–ø–∏—Å–æ–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

1. **–°–µ—Ç–µ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã (VPC):**
    - **VPC (Virtual Private Cloud):** –°–æ–∑–¥–∞—ë—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –æ–±–ª–∞—á–Ω–∞—è —Å–µ—Ç—å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    - **–ü–æ–¥—Å–µ—Ç–∏ (Subnets):** –¢—Ä–∏ –ø–æ–¥—Å–µ—Ç–∏ –≤ –∑–æ–Ω–∞—Ö:
        - `ru-central1-a`: 10.129.1.0/24.
        - `ru-central1-b`: 10.130.1.0/24.
        - `ru-central1-d`: 10.131.1.0/24.
    - **Security Group:**
        - –í—Ö–æ–¥—è—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã:
            - –ü–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `TCP`, –ø–æ—Ä—Ç `22` –¥–ª—è SSH-–¥–æ—Å—Ç—É–ø–∞.
            - –ü–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `TCP`, –ø–æ—Ä—Ç `80` –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
        - –ò—Å—Ö–æ–¥—è—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é.

2. **–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (VM):**
    - –°–æ–∑–¥–∞—ë—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
        - –û–°: Ubuntu 20.04 LTS.
        - 2 CPU, 4 GB RAM, SSD-–¥–∏—Å–∫ 40 GB.
    - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPC, –≤–∫–ª—é—á–µ–Ω–∏–µ NAT.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `cloud-init` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π SSH.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- –°–æ—Å—Ç–æ—è–Ω–∏–µ Terraform —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Yandex Object Storage (S3).

### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Terraform –∏ CI/CD:
- –í—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç–µ workflow Terraform —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub Actions.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `apply`:
    - –ü–æ–ª—É—á–µ–Ω–Ω—ã–π IP –∞–¥—Ä–µ—Å –í–ú –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –¥–µ–ø–ª–æ–π-–ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    - Workflow `deploy.yml` —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üèóÔ∏è Docker Compose: –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–§–∞–π–ª `docker-compose.production.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- **Postgres:** –°–ª—É–∂–∏—Ç –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–≤–µ—Ä—Å–∏—è 13-alpine).
- **Backend:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã API (–æ–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –Ω–∞ Docker Hub).
- **Frontend:** –†–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –Ω–∞ Docker Hub).
- **Gateway (Nginx):** –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±–º–µ–Ω–∞ –º–µ–∂–¥—É frontend –∏ backend.

---

## üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### –®–∞–≥–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
    - –ó–∞–ø—É—Å—Ç–∏—Ç–µ Terraform workflow:
        - –°–æ–∑–¥–∞—ë—Ç VPC, –ø–æ–¥—Å–µ—Ç–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.
        - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–Ω–µ—à–Ω–∏–π IP-–∞–¥—Ä–µ—Å –≤ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø.

2. **–î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
    - –° –ø–æ–º–æ—â—å—é workflow `deploy.yml`:
        - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.
        - –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤.
        - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –≤–Ω–µ—à–Ω–µ–º—É IP-–∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞.

